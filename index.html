<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Official Staff Portal</title>
    <style>
        :root { --primary: #0f172a; --accent: #3b82f6; --bg: #f1f5f9; }
        body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); padding: 20px; }
        .container { max-width: 900px; margin: auto; background: white; padding: 30px; border-radius: 15px; box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: var(--primary); font-weight: 800; border-bottom: 2px solid var(--bg); padding-bottom: 15px; }
        
        .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 25px 0; }
        label { display: block; font-size: 13px; font-weight: 600; text-transform: uppercase; color: #64748b; margin-bottom: 8px; }
        
        select, input { width: 100%; padding: 12px; border: 2px solid #e2e8f0; border-radius: 8px; font-size: 15px; outline: none; transition: 0.2s; }
        select:focus, input:focus { border-color: var(--accent); }
        
        .btn-group { display: flex; gap: 10px; }
        button { flex: 1; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; border: none; transition: 0.3s; }
        .btn-save { background: var(--accent); color: white; }
        .btn-export { background: #10b981; color: white; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }

        .table-section { margin-top: 40px; }
        table { width: 100%; border-collapse: collapse; background: white; border-radius: 8px; overflow: hidden; }
        th { background: #f8fafc; padding: 15px; text-align: left; color: #475569; font-size: 14px; }
        td { padding: 15px; border-top: 1px solid #f1f5f9; font-size: 15px; }
        .status-in { color: #059669; font-weight: 600; }
        .status-out { color: #dc2626; font-weight: 600; }
        .name-tag { font-weight: 700; color: var(--primary); }
    </style>
</head>
<body>

<div class="container">
    <h2>STAFF ATTENDANCE LOG</h2>
    
    <div class="form-grid">
        <div>
            <label>Select Staff Member</label>
            <select id="staffName">
                <option value="Naeem Sir">Naeem Sir</option>
                <option value="Pradeep Sir">Pradeep Sir</option>
                <option value="Yuvraj Sir">Yuvraj Sir</option>
                <option value="Rohini Mam">Rohini Mam</option>
            </select>
        </div>
        <div>
            <label>Date</label>
            <input type="date" id="attDate">
        </div>
        <div>
            <label>In-Time</label>
            <input type="time" id="inTime">
        </div>
        <div>
            <label>Out-Time</label>
            <input type="time" id="outTime">
        </div>
    </div>
    
    <div class="btn-group">
        <button class="btn-save" onclick="addEntry()">Record Attendance</button>
        <button class="btn-export" onclick="exportData()">Download Report (CSV)</button>
    </div>

    <div class="table-section">
        <table>
            <thead>
                <tr>
                    <th>Staff Name</th>
                    <th>Date</th>
                    <th>Entry</th>
                    <th>Exit</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody id="logBody"></tbody>
        </table>
    </div>
</div>

<script>
    document.getElementById('attDate').valueAsDate = new Date();

    function addEntry() {
        const name = document.getElementById('staffName').value;
        const date = document.getElementById('attDate').value;
        const inT = document.getElementById('inTime').value;
        const outT = document.getElementById('outTime').value;

        if(!inT) { alert("Please enter In-Time"); return; }

        const entry = { name, date, inT, outT, id: Date.now() };
        let logs = JSON.parse(localStorage.getItem('staff_db')) || [];
        logs.push(entry);
        localStorage.setItem('staff_db', JSON.stringify(logs));

        renderTable();
    }

    function renderTable() {
        let logs = JSON.parse(localStorage.getItem('staff_db')) || [];
        let html = "";
        // Latest entries first
        [...logs].reverse().forEach(item => {
            html += `<tr>
                <td class="name-tag">${item.name}</td>
                <td>${item.date}</td>
                <td class="status-in">${item.inT}</td>
                <td class="status-out">${item.outT || '--:--'}</td>
                <td><button onclick="deleteEntry(${item.id})" style="color:red; background:none; border:none; cursor:pointer;">âœ–</button></td>
            </tr>`;
        });
        document.getElementById('logBody').innerHTML = html;
    }

    function deleteEntry(id) {
        if(confirm("Delete this record?")) {
            let logs = JSON.parse(localStorage.getItem('staff_db')) || [];
            logs = logs.filter(item => item.id !== id);
            localStorage.setItem('staff_db', JSON.stringify(logs));
            renderTable();
        }
    }

    function exportData() {
        let logs = JSON.parse(localStorage.getItem('staff_db')) || [];
        if(logs.length === 0) { alert("No data to export"); return; }
        
        let csv = "Name,Date,In-Time,Out-Time\n";
        logs.forEach(row => {
            csv += `${row.name},${row.date},${row.inT},${row.outT || 'N/A'}\n`;
        });

        const blob = new Blob([csv], { type: 'text/csv' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.setAttribute('hidden', '');
        a.setAttribute('href', url);
        a.setAttribute('download', 'Staff_Attendance_Report.csv');
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
    }

    renderTable();
</script>

</body>
</html>
